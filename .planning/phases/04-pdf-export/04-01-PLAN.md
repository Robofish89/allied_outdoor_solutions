---
phase: 04-pdf-export
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - next.config.ts
  - src/components/pdf/PDFDocument.tsx
  - src/components/pdf/PDFDownloadButton.tsx
  - src/components/layout/Hero.tsx
  - src/app/page.tsx
autonomous: false
---

<objective>
Build a downloadable PDF version of the Allied AI Strategy Showcase using @react-pdf/renderer.

Purpose: Provide a professional, printable PDF that Allied leadership can circulate internally — matching the web brand aesthetic with cover page and all 10 use case pages.
Output: A "Download PDF" button on the site that generates and downloads a branded PDF with cover page + 10 use case cards, working locally and on Vercel.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@src/types/use-case.ts
@src/data/use-cases.ts
@src/components/layout/Hero.tsx
@src/components/layout/Footer.tsx
@src/app/page.tsx
@next.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install @react-pdf/renderer and build PDF document component</name>
  <files>next.config.ts, src/components/pdf/PDFDocument.tsx</files>
  <action>
  1. Run `npm install @react-pdf/renderer`

  2. Update next.config.ts to add `experimental: { esmExternals: 'loose' }` — required for @react-pdf/renderer's Yoga layout engine ESM compatibility with Next.js 16.

  3. Create `src/components/pdf/PDFDocument.tsx` (no "use client" — it's imported by the download button which handles that). This file contains:

  **Font registration (module scope, before component):**
  - Register Libre Baskerville from Google Fonts CDN as serif heading font (regular + bold weights, TTF URLs from fonts.gstatic.com). This replaces Georgia which isn't available in PDFs.
  - Use Helvetica (built-in) for body/sans text — no registration needed.

  **Brand constants:**
  - Allied Navy: #0F2B46
  - Allied Cream: #F5F0EB
  - Allied Gold: #C4A35A
  - Allied Charcoal: #2D2D2D
  - Allied Slate: #64748B

  **StyleSheet (using StyleSheet.create):**
  - Page: LETTER size, padding 50pt, fontFamily Helvetica, fontSize 10, color charcoal
  - Cover page: navy background, centered content, cream text
  - Cover title: Libre Baskerville, 36pt, bold, cream
  - Cover subtitle: Helvetica, 14pt, cream/80 opacity
  - Cover gold accent line: 60pt wide, 3pt tall, gold background, centered
  - Card container: wrap={false} so each card stays together, marginBottom 24pt, padding 20pt, border 1pt solid #E5E0DB (cream-ish border)
  - Card title: Libre Baskerville, 14pt, bold, navy
  - Timeline badge: inline, gold background, navy text, 8pt, paddingHorizontal 8, paddingVertical 2, borderRadius 4
  - Card subtitle: Helvetica, 10pt, italic, slate
  - Card description: Helvetica, 9.5pt, charcoal, lineHeight 1.5
  - Allied context: left border 2pt gold, paddingLeft 10, italic, 9pt, slate
  - Process flow: 3 columns (flex row), each step with colored dot (View with borderRadius) + label
  - Tools row: flex row, wrap, small badges (8pt, gray background, rounded)
  - ROI box: cream background, padding 10, 9pt
  - Page number: fixed at bottom center, 8pt, slate
  - Section header: Libre Baskerville, 18pt, bold, navy, marginTop 30, marginBottom 6

  **Document structure:**
  - `<Document>` wrapping everything
  - **Page 1 (Cover):** Navy background page. Centered layout with:
    - "Allied Outdoor Solutions" in Libre Baskerville, cream
    - Gold divider line
    - "AI Strategy Showcase" subtitle
    - "10 AI-Powered Solutions to Transform Sales, Marketing & Operations"
    - "Prepared by Gerhard van den Heever" at bottom
  - **Content pages (single Page with wrap):** Loop through CATEGORY_SECTIONS. For each category:
    - Section header (e.g., "Quick Wins — Deploy in 1-2 Weeks")
    - Filter USE_CASES by timeline category
    - For each use case, render a card with `wrap={false}` containing:
      - Title + timeline badge (flex row, space-between)
      - Subtitle (italic)
      - Description paragraph
      - Allied context (gold left border block)
      - "How It Works" process flow: 3 steps in a row, each with a colored circle (input=slate, ai=gold, output=navy) + label. Between steps, render "→" text.
      - Tools row: badges in flex-wrap row
      - ROI box: cream background with ROI text
  - **Fixed page number** on content pages: `render={({ pageNumber, totalPages }) => \`\${pageNumber} / \${totalPages}\`}` — exclude cover page by rendering `pageNumber > 1 ? \`\${pageNumber - 1}\` : ''`

  **Important notes:**
  - Do NOT use Image component for the logo (it's SVG which isn't supported). Use Text-based branding on the cover instead.
  - Process flow dots: Use `<View>` with width/height 10, borderRadius 5, and backgroundColor matching the step type color.
  - The component exports a default function `PDFDocument` that takes no props — it imports USE_CASES and CATEGORY_SECTIONS directly from the data file.
  </action>
  <verify>npm run build succeeds without errors. Check that PDFDocument.tsx has no TypeScript errors.</verify>
  <done>PDFDocument component renders cover page + 3 category sections with all 10 use case cards in @react-pdf/renderer format. Build passes.</done>
</task>

<task type="auto">
  <name>Task 2: Create PDF download button and wire into site</name>
  <files>src/components/pdf/PDFDownloadButton.tsx, src/components/layout/Hero.tsx, src/app/page.tsx</files>
  <action>
  1. Create `src/components/pdf/PDFDownloadButton.tsx` with "use client" directive:
     - Use `dynamic(() => import(...), { ssr: false })` pattern to load a nested component that uses `usePDF` hook from @react-pdf/renderer.
     - The inner component:
       - Imports PDFDocument and calls `usePDF({ document: <PDFDocument /> })`
       - Shows "Preparing PDF..." text while `instance.loading` is true
       - Shows download link (`<a href={instance.url} download="allied-ai-strategy.pdf">`) styled as a button when ready
       - Handles error state gracefully
     - The outer component:
       - Dynamically imports the inner component with `ssr: false`
       - Shows a placeholder/skeleton while loading (a button-shaped div with "Download PDF" text, same dimensions as final button)
     - Button styling: Match the existing CTA style — gold background (#C4A35A), navy text (#0F2B46), rounded-lg, px-8 py-3, font-sans text-sm font-semibold tracking-wide, hover:bg-allied-gold/90 transition. Add a small download icon (inline SVG arrow-down, 16x16) before the text.

  2. Update `src/components/layout/Hero.tsx`:
     - Import PDFDownloadButton
     - Add it below the "Explore Solutions" CTA, inside the HeroCTA wrapper but as a separate element. Place it above the bounce arrow with some margin (mt-6).
     - Style: Center-aligned, same gold button aesthetic.

  3. Ensure page.tsx still builds (it's already "use client", no changes needed to page.tsx itself unless imports change).
  </action>
  <verify>npm run build succeeds. Run `npm run dev` and verify the button appears on the hero section. Click the download button — a PDF file named "allied-ai-strategy.pdf" should download.</verify>
  <done>Download PDF button visible in hero section. Clicking it generates and downloads a branded PDF with cover page and all 10 use case cards. Build passes without errors.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>PDF download button on the hero section that generates a branded Allied AI Strategy Showcase PDF with cover page + 10 use case cards organized by category</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:3000
    3. In the hero section, find the "Download PDF" button
    4. Click it — a PDF should download (may take a moment to generate)
    5. Open the PDF and verify:
       - Cover page: Navy background, "Allied Outdoor Solutions" heading, gold divider, subtitle
       - Content pages: 3 category sections (Quick Wins, Medium-Term, Strategic)
       - Each use case card: title, timeline badge, description, Allied context, process flow, tools, ROI
       - Professional layout — no cut-off cards, readable fonts, brand colors
       - Page numbers on content pages
    6. Verify the button doesn't break the site layout on mobile (resize to 375px width)
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] PDF downloads successfully on localhost
- [ ] PDF contains cover page + all 10 use cases in 3 categories
- [ ] No TypeScript or ESLint errors introduced
- [ ] Hero section layout not broken by new button
- [ ] Human verified PDF quality
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- PDF downloads correctly with professional layout
- Cover page + 10 use case pages present
- Brand aesthetic maintained (navy, cream, gold colors, serif headings)
- Download button integrated cleanly into hero section
- Build passes for Vercel deployment
  </success_criteria>

<output>
After completion, create `.planning/phases/04-pdf-export/04-01-SUMMARY.md`
</output>
